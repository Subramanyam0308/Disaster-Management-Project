<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FloodGuard - Flood Disaster Management</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #f39c12;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --info-color: #3498db;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --bg-color: #f8f9fa;
            --white: #ffffff;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --text-color: #e0e0e0;
            --white: #2d2d2d;
            --light-color: #3a3a3a;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-content {
            text-align: center;
            color: white;
        }

        .loading-icon {
            font-size: 4rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 1rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Notifications */
        .notifications-container {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 1001;
            max-width: 400px;
        }

        .notification {
            background: var(--info-color);
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 10px;
            animation: slideIn 0.3s ease-out;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .notification.success { background: var(--success-color); }
        .notification.warning { background: var(--warning-color); }
        .notification.error { background: var(--danger-color); }

        .notification .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            margin-left: 10px;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .notification .close-btn:hover { opacity: 1; }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 1rem 0;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--accent-color);
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav {
            display: flex;
            gap: 1rem;
        }

        .nav-link {
            background: none;
            border: none;
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--accent-color);
        }

        .emergency-btn {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            animation: pulse 2s infinite;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .emergency-btn:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        /* Alert Banner */
        .alert-banner {
            background: linear-gradient(90deg, var(--warning-color), #e67e22);
            color: white;
            padding: 15px 0;
            margin-top: 80px;
            animation: slideDown 0.5s ease-out;
        }

        .alert-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .alert-content i {
            font-size: 1.2rem;
            animation: flash 2s infinite;
        }

        @keyframes flash {
            0%, 50%, 100% { opacity: 1; }
            25%, 75% { opacity: 0.5; }
        }

        .close-alert {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0 10px;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .close-alert:hover { opacity: 1; }

        @keyframes slideDown {
            from { transform: translateY(-100%); }
            to { transform: translateY(0); }
        }

        /* Main Content */
        .main { margin-top: 80px; }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero .container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 3rem;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .hero-content h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: bold;
            line-height: 1.2;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .hero-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .hero-animation {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-icon {
            font-size: 8rem;
            opacity: 0.3;
            z-index: 2;
            position: relative;
        }

        .ripple {
            position: absolute;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: ripple 3s infinite;
        }

        .ripple:nth-child(2) { animation-delay: 1s; }
        .ripple:nth-child(3) { animation-delay: 2s; }

        @keyframes ripple {
            0% { width: 0; height: 0; opacity: 1; }
            100% { width: 200px; height: 200px; opacity: 0; }
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before { left: 100%; }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: white;
            color: var(--primary-color);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn.active {
            background: var(--primary-color);
            color: white;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Status Section */
        .status-section {
            padding: 3rem 0;
            background: var(--white);
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 2rem;
            color: var(--text-color);
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .status-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            text-align: center;
            border-left: 4px solid var(--primary-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .status-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            background: var(--light-color);
            transition: var(--transition);
        }

        .status-icon.safe {
            background: #d5f4e6;
            color: var(--success-color);
        }

        .status-icon i {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .status-card h3 {
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .status-card p {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--success-color);
            margin-bottom: 0.5rem;
        }

        .status-card small {
            color: #7f8c8d;
        }

        .status-progress, .level-indicator {
            width: 100%;
            height: 4px;
            background: var(--light-color);
            border-radius: 2px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .progress-bar, .level-bar {
            height: 100%;
            background: var(--success-color);
            border-radius: 2px;
            transition: width 1s ease;
        }

        .rain-animation {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .raindrop {
            position: absolute;
            width: 2px;
            height: 10px;
            background: rgba(52, 152, 219, 0.3);
            animation: rain 2s linear infinite;
        }

        .raindrop:nth-child(1) { left: 20%; animation-delay: 0s; }
        .raindrop:nth-child(2) { left: 50%; animation-delay: 0.5s; }
        .raindrop:nth-child(3) { left: 80%; animation-delay: 1s; }

        @keyframes rain {
            0% { top: -10px; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        /* Sections */
        .section { padding: 4rem 0; }
        .section:nth-child(even) { background: var(--bg-color); }

        .section-title {
            font-size: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Alert Filters */
        .alert-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-btn.active, .filter-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Alerts */
        .alerts-container {
            display: grid;
            gap: 1rem;
            max-width: 800px;
            margin: 0 auto 2rem;
        }

        .alert-item {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border-left: 4px solid var(--warning-color);
            transition: var(--transition);
            opacity: 0;
            animation: fadeInUp 0.5s ease forwards;
        }

        .alert-item:hover { transform: translateX(5px); }

        .alert-item.high { border-left-color: var(--danger-color); }
        .alert-item.medium { border-left-color: var(--warning-color); }
        .alert-item.low { border-left-color: #f1c40f; }
        .alert-item.critical { border-left-color: #c0392b; }

        .alert-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .alert-title {
            font-weight: bold;
            color: var(--text-color);
        }

        .alert-time {
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Safety Tabs */
        .safety-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 1rem 2rem;
            border: none;
            background: var(--light-color);
            color: var(--text-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .tab-btn.active, .tab-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .safety-content { position: relative; }

        .safety-tab {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .safety-tab.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .safety-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .safety-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .safety-card:hover { transform: translateY(-5px); }

        .safety-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .safety-card h3 {
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .safety-card ul { list-style: none; }

        .safety-card li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--light-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .safety-card li i {
            color: var(--success-color);
            width: 16px;
        }

        /* Chart Section */
        .data-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .control-group label {
            font-weight: 600;
            color: var(--text-color);
        }

        .control-group select {
            padding: 0.5rem;
            border: 2px solid var(--light-color);
            border-radius: var(--border-radius);
            background: var(--white);
            color: var(--text-color);
        }

        .chart-container {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .chart-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chart-legend {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .chart-controls { display: flex; gap: 0.5rem; }

        #floodChart {
            max-height: 400px;
            width: 100%;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .stat-card {
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
        }

        .stat-card:hover { transform: translateY(-3px); }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 0.5rem 0;
        }

        .stat-trend {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            margin-top: 0.5rem;
        }

        .stat-trend.up {
            background: #d5f4e6;
            color: var(--success-color);
        }

        .stat-trend.down {
            background: #ffeaa7;
            color: #d63031;
        }

        .stat-trend.neutral {
            background: var(--light-color);
            color: var(--text-color);
        }

        /* Report Form */
        .report-container {
            max-width: 700px;
            margin: 0 auto;
        }

        .report-form {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .form-group { margin-bottom: 1.5rem; }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-color);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--light-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            background: var(--white);
            color: var(--text-color);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .location-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .location-input input { flex: 1; }

        .location-map {
            margin-top: 1rem;
            height: 200px;
            border: 2px solid var(--light-color);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-color);
        }

        .map-placeholder {
            text-align: center;
            color: #7f8c8d;
        }

        .map-placeholder i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .severity-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .severity-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 2px solid var(--light-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .severity-option:hover { border-color: var(--primary-color); }

        .severity-option input[type="radio"] { display: none; }

        .severity-option input[type="radio"]:checked + .severity-indicator {
            background: var(--primary-color);
        }

        .severity-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid var(--light-color);
            transition: var(--transition);
        }

        .severity-option.low .severity-indicator { background: #f1c40f; }
        .severity-option.medium .severity-indicator { background: var(--warning-color); }
        .severity-option.high .severity-indicator { background: var(--danger-color); }
        .severity-option.critical .severity-indicator { background: #c0392b; }

        .char-counter {
            text-align: right;
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-top: 0.5rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] { width: auto; }

        .checkmark {
            width: 20px;
            height: 20px;
            border: 2px solid var(--light-color);
            border-radius: 4px;
            position: relative;
        }

        .checkbox-label input[type="checkbox"]:checked + .checkmark {
            background: var(--primary-color);
            border-color: var(--primary-color);
        }

        .checkbox-label input[type="checkbox"]:checked + .checkmark::after {
            content: "✓";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
        }

        /* Resources */
        .resources-tabs {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .resource-tab {
            padding: 1rem 1.5rem;
            border: none;
            background: var(--light-color);
            color: var(--text-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .resource-tab.active, .resource-tab:hover {
            background: var(--primary-color);
            color: white;
        }

        .resource-content { position: relative; }

        .resource-panel { display: none; }
        .resource-panel.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .resource-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .resource-card:hover { transform: translateY(-5px); }

        .resource-card.emergency { border: 2px solid var(--danger-color); }

        .resource-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--danger-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .contact-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .contact-item {
            padding: 1rem;
            background: var(--bg-color);
            border-radius: var(--border-radius);
            border-left: 3px solid var(--primary-color);
        }

        .contact-item.urgent {
            border-left-color: var(--danger-color);
            background: #ffeaa7;
        }

        .contact-link {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
        }

        .contact-link:hover { text-decoration: underline; }

        /* Evacuation Centers */
        .evacuation-centers { display: grid; gap: 2rem; }

        .center-card {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .center-status {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .center-status.open {
            background: #d5f4e6;
            color: var(--success-color);
        }

        .center-status.closed {
            background: #ffeaa7;
            color: #d63031;
        }

        .center-address {
            color: #7f8c8d;
            margin-bottom: 1rem;
        }

        .center-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .detail-item i {
            color: var(--primary-color);
            width: 16px;
        }

        /* Emergency Kit */
        .emergency-kit { display: grid; gap: 2rem; }

        .kit-section {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .kit-section h3 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .kit-checklist {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .kit-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            cursor: pointer;
            padding: 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .kit-item:hover { background: var(--bg-color); }

        .kit-item input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .kit-item .checkmark { margin-top: 0.25rem; }

        .item-details strong {
            display: block;
            color: var(--text-color);
        }

        .item-details small { color: #7f8c8d; }

        .kit-progress {
            background: var(--white);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-top: 2rem;
        }

        .progress-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-bar-container {
            flex: 1;
            height: 10px;
            background: var(--light-color);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-text {
            font-weight: bold;
            color: var(--primary-color);
        }

        /* Footer */
        .footer {
            background: var(--secondary-color);
            color: white;
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .footer-logo i {
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--accent-color);
        }

        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .footer-link {
            background: none;
            border: none;
            color: #bdc3c7;
            text-decoration: none;
            cursor: pointer;
            transition: color 0.3s;
            text-align: left;
            padding: 0;
        }

        .footer-link:hover { color: var(--accent-color); }

        .footer-contacts a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .footer-contacts a:hover { text-decoration: underline; }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #34495e;
            color: #bdc3c7;
        }

        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            opacity: 0;
            visibility: hidden;
            z-index: 1000;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background: #2980b9;
            transform: translateY(-3px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header .container {
                flex-direction: column;
                gap: 1rem;
            }

            .nav {
                gap: 0.5rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .nav-link {
                padding: 0.5rem;
                font-size: 0.9rem;
            }

            .hero .container {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .hero-content h2 { font-size: 2rem; }
            .hero-actions { justify-content: center; }

            .status-grid, .safety-grid, .resources-grid {
                grid-template-columns: 1fr;
            }

            .data-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .chart-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .location-input { flex-direction: column; }
            .severity-options { grid-template-columns: 1fr; }
            .resources-tabs { flex-direction: column; }
        }

        @media (max-width: 480px) {
            .container { padding: 0 15px; }
            .hero-content h2 { font-size: 1.5rem; }

            .section-title {
                font-size: 1.5rem;
                flex-direction: column;
                gap: 5px;
            }

            .stats-grid { grid-template-columns: 1fr; }

            .hero-actions {
                flex-direction: column;
                width: 100%;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .alert-filters { flex-direction: column; }
            .safety-tabs, .resources-tabs { flex-direction: column; }
        }

        /* Dark Mode Styles */
        [data-theme="dark"] .status-card,
        [data-theme="dark"] .safety-card,
        [data-theme="dark"] .resource-card,
        [data-theme="dark"] .chart-container,
        [data-theme="dark"] .report-form,
        [data-theme="dark"] .alert-item,
        [data-theme="dark"] .stat-card,
        [data-theme="dark"] .kit-section,
        [data-theme="dark"] .center-card {
            background: var(--white);
            color: var(--text-color);
        }

        [data-theme="dark"] .contact-item { background: var(--light-color); }

        [data-theme="dark"] .form-group input,
        [data-theme="dark"] .form-group select,
        [data-theme="dark"] .form-group textarea {
            background: var(--white);
            color: var(--text-color);
            border-color: var(--light-color);
        }

        /* Utility Classes */
        .hidden { display: none !important; }
        .text-center { text-align: center; }
        .fade-in { animation: fadeIn 0.5s ease; }
        .slide-up { animation: slideUp 0.5s ease; }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Print Styles */
        @media print {
            .header, .footer, .back-to-top, .notifications-container {
                display: none;
            }
            .main { margin-top: 0; }
            .section { page-break-inside: avoid; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <i class="fas fa-shield-alt loading-icon"></i>
            <h2>FloodGuard</h2>
            <div class="loading-spinner"></div>
            <p>Initializing Emergency Management System...</p>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notifications" class="notifications-container"></div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <h1>FloodGuard</h1>
            </div>
            <nav class="nav">
                <button class="nav-link" onclick="scrollToSection('alerts')">
                    <i class="fas fa-bell"></i> Alerts
                </button>
                <button class="nav-link" onclick="scrollToSection('safety')">
                    <i class="fas fa-life-ring"></i> Safety
                </button>
                <button class="nav-link" onclick="scrollToSection('report')">
                    <i class="fas fa-flag"></i> Report
                </button>
                <button class="nav-link" onclick="scrollToSection('resources')">
                    <i class="fas fa-hands-helping"></i> Resources
                </button>
                <button class="nav-link" onclick="scrollToSection('data')">
                    <i class="fas fa-chart-line"></i> Data
                </button>
            </nav>
            <button class="emergency-btn" onclick="callEmergency()">
                <i class="fas fa-phone"></i>
                Emergency
            </button>
        </div>
    </header>

    <!-- Alert Banner -->
    <div class="alert-banner" id="alertBanner">
        <div class="container">
            <div class="alert-content">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="bannerText">FLOOD WARNING: Heavy rainfall expected in your area. Stay alert!</span>
                <button class="close-alert" onclick="closeAlert()">&times;</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h2>Stay Safe During Flood Emergencies</h2>
                    <p>Your safety is our priority. Get real-time alerts, safety information, and emergency resources.</p>
                    <div class="hero-actions">
                        <button class="btn btn-primary" onclick="getCurrentLocation()">
                            <i class="fas fa-location-arrow"></i>
                            Get Local Alerts
                        </button>
                        <button class="btn btn-secondary" onclick="scrollToSection('safety')">
                            <i class="fas fa-book"></i>
                            Safety Guide
                        </button>
                        <button class="btn btn-outline" onclick="toggleDarkMode()">
                            <i class="fas fa-moon" id="themeIcon"></i>
                            <span id="themeText">Dark Mode</span>
                        </button>
                    </div>
                </div>
                <div class="hero-image">
                    <div class="hero-animation">
                        <i class="fas fa-water hero-icon"></i>
                        <div class="ripple"></div>
                        <div class="ripple"></div>
                        <div class="ripple"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Current Status -->
        <section class="status-section">
            <div class="container">
                <h2 class="section-subtitle">Current Conditions</h2>
                <div class="status-grid">
                    <div class="status-card" id="statusCard">
                        <div class="status-icon safe">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3>Current Status</h3>
                        <p id="currentStatus">Safe - No immediate threat</p>
                        <small id="lastUpdated">Last updated: Just now</small>
                        <div class="status-progress">
                            <div class="progress-bar" id="statusProgress"></div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="status-icon">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <h3>Water Level</h3>
                        <p id="waterLevel">2.3m (Normal)</p>
                        <small>River monitoring station</small>
                        <div class="level-indicator">
                            <div class="level-bar" id="waterLevelBar"></div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="status-icon">
                            <i class="fas fa-cloud-rain"></i>
                        </div>
                        <h3>Rainfall</h3>
                        <p id="rainfall">15mm (Light)</p>
                        <small>Last 24 hours</small>
                        <div class="rain-animation">
                            <div class="raindrop"></div>
                            <div class="raindrop"></div>
                            <div class="raindrop"></div>
                        </div>
                    </div>
                    <div class="status-card">
                        <div class="status-icon">
                            <i class="fas fa-wind"></i>
                        </div>
                        <h3>Wind Speed</h3>
                        <p id="windSpeed">12 km/h (Light)</p>
                        <small>Current conditions</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Alerts Section -->
        <section id="alerts" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-bell"></i>
                    Emergency Alerts
                </h2>
                <div class="alert-filters">
                    <button class="filter-btn active" onclick="filterAlerts('all')">All</button>
                    <button class="filter-btn" onclick="filterAlerts('critical')">Critical</button>
                    <button class="filter-btn" onclick="filterAlerts('high')">High</button>
                    <button class="filter-btn" onclick="filterAlerts('medium')">Medium</button>
                    <button class="filter-btn" onclick="filterAlerts('low')">Low</button>
                </div>
                <div class="alerts-container" id="alertsContainer">
                    <!-- Alerts will be populated by JavaScript -->
                </div>
                <button class="btn btn-outline" onclick="loadMoreAlerts()" id="loadMoreBtn">
                    <i class="fas fa-plus"></i>
                    Load More Alerts
                </button>
            </div>
        </section>

        <!-- Safety Guidelines -->
        <section id="safety" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-life-ring"></i>
                    Flood Safety Guidelines
                </h2>
                <div class="safety-tabs">
                    <button class="tab-btn active" onclick="showSafetyTab('before')">Before Flooding</button>
                    <button class="tab-btn" onclick="showSafetyTab('during')">During Flooding</button>
                    <button class="tab-btn" onclick="showSafetyTab('after')">After Flooding</button>
                </div>
                <div class="safety-content">
                    <div class="safety-tab active" id="before">
                        <div class="safety-grid">
                            <div class="safety-card">
                                <div class="safety-icon">
                                    <i class="fas fa-home"></i>
                                </div>
                                <h3>Prepare Your Home</h3>
                                <ul>
                                    <li><i class="fas fa-check"></i> Create an emergency kit</li>
                                    <li><i class="fas fa-check"></i> Know evacuation routes</li>
                                    <li><i class="fas fa-check"></i> Secure important documents</li>
                                    <li><i class="fas fa-check"></i> Install sump pumps</li>
                                    <li><i class="fas fa-check"></i> Sign up for local alerts</li>
                                </ul>
                            </div>
                            <div class="safety-card">
                                <div class="safety-icon">
                                    <i class="fas fa-car"></i>
                                </div>
                                <h3>Vehicle Preparation</h3>
                                <ul>
                                    <li><i class="fas fa-check"></i> Keep fuel tank full</li>
                                    <li><i class="fas fa-check"></i> Check emergency supplies in car</li>
                                    <li><i class="fas fa-check"></i> Know alternate routes</li>
                                    <li><i class="fas fa-check"></i> Have emergency contact numbers</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="safety-tab" id="during">
                        <div class="safety-grid">
                            <div class="safety-card">
                                <div class="safety-icon">
                                    <i class="fas fa-running"></i>
                                </div>
                                <h3>Immediate Actions</h3>
                                <ul>
                                    <li><i class="fas fa-exclamation-triangle"></i> Move to higher ground immediately</li>
                                    <li><i class="fas fa-exclamation-triangle"></i> Avoid walking in moving water</li>
                                    <li><i class="fas fa-exclamation-triangle"></i> Stay away from downed power lines</li>
                                    <li><i class="fas fa-exclamation-triangle"></i> Listen to emergency broadcasts</li>
                                    <li><i class="fas fa-exclamation-triangle"></i> Don't drive through flooded roads</li>
                                </ul>
                            </div>
                            <div class="safety-card">
                                <div class="safety-icon">
                                    <i class="fas fa-phone-alt"></i>
                                </div>
                                <h3>Communication</h3>
                                <ul>
                                    <li><i class="fas fa-check"></i> Call 911 if in immediate danger</li>
                                    <li><i class="fas fa-check"></i> Text instead of calling when possible</li>
                                    <li><i class="fas fa-check"></i> Use social media to update status</li>
                                    <li><i class="fas fa-check"></i> Conserve phone battery</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="safety-tab" id="after">
                        <div class="safety-grid">
                            <div class="safety-card">
                                <div class="safety-icon">
                                    <i class="fas fa-tools"></i>
                                </div>
                                <h3>Recovery Steps</h3>
                                <ul>
                                    <li><i class="fas fa-check"></i> Wait for authorities' all-clear</li>
                                    <li><i class="fas fa-check"></i> Avoid flood water (contaminated)</li>
                                    <li><i class="fas fa-check"></i> Document damage with photos</li>
                                    <li><i class="fas fa-check"></i> Contact insurance company</li>
                                    <li><i class="fas fa-check"></i> Clean and disinfect everything</li>
                                </ul>
                            </div>
                            <div class="safety-card">
                                <div class="safety-icon">
                                    <i class="fas fa-medkit"></i>
                                </div>
                                <h3>Health & Safety</h3>
                                <ul>
                                    <li><i class="fas fa-check"></i> Boil water before drinking</li>
                                    <li><i class="fas fa-check"></i> Throw away contaminated food</li>
                                    <li><i class="fas fa-check"></i> Watch for injuries and infections</li>
                                    <li><i class="fas fa-check"></i> Be aware of carbon monoxide</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Flood Data Visualization -->
        <section id="data" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i>
                    Flood Data & Analytics
                </h2>
                <div class="data-controls">
                    <div class="control-group">
                        <label>Data Type:</label>
                        <select id="dataType" onchange="updateChartType()">
                            <option value="water">Water Level</option>
                            <option value="rainfall">Rainfall</option>
                            <option value="combined">Combined View</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Time Period:</label>
                        <div class="chart-controls">
                            <button class="btn btn-small active" onclick="updateChart('week')">7 Days</button>
                            <button class="btn btn-small" onclick="updateChart('month')">30 Days</button>
                            <button class="btn btn-small" onclick="updateChart('year')">1 Year</button>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <div class="chart-header">
                        <h3 id="chartTitle">Water Level Monitoring (Last 7 Days)</h3>
                        <div class="chart-info">
                            <span class="chart-legend">
                                <span class="legend-item">
                                    <span class="legend-color" style="background: #3498db;"></span>
                                    Current Level
                                </span>
                                <span class="legend-item">
                                    <span class="legend-color" style="background: #e74c3c;"></span>
                                    Danger Level
                                </span>
                            </span>
                        </div>
                    </div>
                    <canvas id="floodChart"></canvas>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <h4>Peak Water Level</h4>
                        <p class="stat-value" id="peakLevel">4.2m</p>
                        <small>This month</small>
                        <div class="stat-trend up">+0.3m from last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-cloud-rain"></i>
                        </div>
                        <h4>Total Rainfall</h4>
                        <p class="stat-value" id="totalRainfall">156mm</p>
                        <small>This month</small>
                        <div class="stat-trend down">-23mm from last month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h4>Flood Incidents</h4>
                        <p class="stat-value" id="floodIncidents">3</p>
                        <small>This year</small>
                        <div class="stat-trend neutral">Same as last year</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4>People Evacuated</h4>
                        <p class="stat-value" id="peopleEvacuated">247</p>
                        <small>This year</small>
                        <div class="stat-trend down">-89 from last year</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Report Section -->
        <section id="report" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-flag"></i>
                    Report Flood Incident
                </h2>
                <div class="report-container">
                    <form class="report-form" id="reportForm" onsubmit="handleReportSubmit(event)">
                        <div class="form-group">
                            <label for="incidentType">Incident Type *</label>
                            <select id="incidentType" required>
                                <option value="">Select incident type</option>
                                <option value="flooding">Active Flooding</option>
                                <option value="rising-water">Rising Water Levels</option>
                                <option value="blocked-drain">Blocked Drainage</option>
                                <option value="road-closure">Road Closure</option>
                                <option value="evacuation">Evacuation Needed</option>
                                <option value="infrastructure">Infrastructure Damage</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="location">Location *</label>
                            <div class="location-input">
                                <input type="text" id="location" placeholder="Enter address or landmark" required>
                                <button type="button" class="btn btn-small" onclick="useCurrentLocation()">
                                    <i class="fas fa-crosshairs"></i>
                                    Use My Location
                                </button>
                            </div>
                            <div id="locationMap" class="location-map">
                                <div class="map-placeholder">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <p>Location will be shown here</p>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="severity">Severity Level *</label>
                            <div class="severity-options">
                                <label class="severity-option low">
                                    <input type="radio" name="severity" value="low" required>
                                    <span class="severity-indicator"></span>
                                    <div>
                                        <strong>Low</strong>
                                        <small>Minor inconvenience</small>
                                    </div>
                                </label>
                                <label class="severity-option medium">
                                    <input type="radio" name="severity" value="medium" required>
                                    <span class="severity-indicator"></span>
                                    <div>
                                        <strong>Medium</strong>
                                        <small>Significant impact</small>
                                    </div>
                                </label>
                                <label class="severity-option high">
                                    <input type="radio" name="severity" value="high" required>
                                    <span class="severity-indicator"></span>
                                    <div>
                                        <strong>High</strong>
                                        <small>Dangerous situation</small>
                                    </div>
                                </label>
                                <label class="severity-option critical">
                                    <input type="radio" name="severity" value="critical" required>
                                    <span class="severity-indicator"></span>
                                    <div>
                                        <strong>Critical</strong>
                                        <small>Life threatening</small>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="description">Description *</label>
                            <textarea id="description" rows="4" placeholder="Describe the situation in detail..." required></textarea>
                            <div class="char-counter">
                                <span id="charCount">0</span>/500 characters
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="contact">Your Contact (Optional)</label>
                            <input type="tel" id="contact" placeholder="Phone number for follow-up">
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="anonymous">
                                <span class="checkmark"></span>
                                Submit anonymously
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i>
                            Submit Report
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resources" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-hands-helping"></i>
                    Emergency Resources
                </h2>
                <div class="resources-tabs">
                    <button class="resource-tab active" onclick="showResourceTab('contacts')">
                        <i class="fas fa-phone-alt"></i> Emergency Contacts
                    </button>
                    <button class="resource-tab" onclick="showResourceTab('centers')">
                        <i class="fas fa-map-marker-alt"></i> Evacuation Centers
                    </button>
                    <button class="resource-tab" onclick="showResourceTab('kit')">
                        <i class="fas fa-first-aid"></i> Emergency Kit
                    </button>
                </div>

                <div class="resource-content">
                    <div class="resource-panel active" id="contacts">
                        <div class="resources-grid">
                            <div class="resource-card emergency">
                                <div class="resource-icon">
                                    <i class="fas fa-phone-alt"></i>
                                </div>
                                <h3>Emergency Services</h3>
                                <div class="contact-list">
                                    <div class="contact-item urgent">
                                        <strong>Emergency Services:</strong>
                                        <a href="tel:911" class="contact-link">911</a>
                                    </div>
                                    <div class="contact-item">
                                        <strong>Flood Hotline:</strong>
                                        <a href="tel:1-800-356-6348" class="contact-link">1-800-FLOOD-HELP</a>
                                    </div>
                                    <div class="contact-item">
                                        <strong>Red Cross:</strong>
                                        <a href="tel:1-800-733-2767" class="contact-link">1-800-RED-CROSS</a>
                                    </div>
                                    <div class="contact-item">
                                        <strong>Local Emergency:</strong>
                                        <a href="tel:555-123-4567" class="contact-link">(555) 123-4567</a>
                                    </div>
                                </div>
                            </div>
                            <div class="resource-card">
                                <div class="resource-icon">
                                    <i class="fas fa-hospital"></i>
                                </div>
                                <h3>Medical Emergency</h3>
                                <div class="contact-list">
                                    <div class="contact-item">
                                        <strong>Poison Control:</strong>
                                        <a href="tel:1-800-222-1222" class="contact-link">1-800-222-1222</a>
                                    </div>
                                    <div class="contact-item">
                                        <strong>Mental Health Crisis:</strong>
                                        <a href="tel:988" class="contact-link">988</a>
                                    </div>
                                    <div class="contact-item">
                                        <strong>Local Hospital:</strong>
                                        <a href="tel:555-987-6543" class="contact-link">(555) 987-6543</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="resource-panel" id="centers">
                        <div class="evacuation-centers">
                            <div class="center-card">
                                <div class="center-status open">
                                    <i class="fas fa-check-circle"></i>
                                    <span>OPEN</span>
                                </div>
                                <h3>Central Community Center</h3>
                                <p class="center-address">123 Main St</p>
                                <div class="center-details">
                                    <div class="detail-item">
                                        <i class="fas fa-route"></i>
                                        <span>2.1 miles away</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-users"></i>
                                        <span>Capacity: 500 people</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-utensils"></i>
                                        <span>Meals provided</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-bed"></i>
                                        <span>Sleeping arrangements</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="getDirections('123 Main St')">
                                    <i class="fas fa-directions"></i>
                                    Get Directions
                                </button>
                            </div>
                            <div class="center-card">
                                <div class="center-status open">
                                    <i class="fas fa-check-circle"></i>
                                    <span>OPEN</span>
                                </div>
                                <h3>High School Gymnasium</h3>
                                <p class="center-address">456 Oak Ave</p>
                                <div class="center-details">
                                    <div class="detail-item">
                                        <i class="fas fa-route"></i>
                                        <span>3.4 miles away</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-users"></i>
                                        <span>Capacity: 300 people</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-utensils"></i>
                                        <span>Meals provided</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="getDirections('456 Oak Ave')">
                                    <i class="fas fa-directions"></i>
                                    Get Directions
                                </button>
                            </div>
                            <div class="center-card">
                                <div class="center-status closed">
                                    <i class="fas fa-times-circle"></i>
                                    <span>FULL</span>
                                </div>
                                <h3>City Sports Complex</h3>
                                <p class="center-address">789 Pine Rd</p>
                                <div class="center-details">
                                    <div class="detail-item">
                                        <i class="fas fa-route"></i>
                                        <span>4.2 miles away</span>
                                    </div>
                                    <div class="detail-item">
                                        <i class="fas fa-users"></i>
                                        <span>Capacity: 800 people</span>
                                    </div>
                                </div>
                                <button class="btn btn-secondary" disabled>
                                    <i class="fas fa-ban"></i>
                                    Currently Full
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="resource-panel" id="kit">
                        <div class="emergency-kit">
                            <div class="kit-section">
                                <h3><i class="fas fa-tint"></i> Water & Food</h3>
                                <div class="kit-checklist">
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Water</strong>
                                            <small>1 gallon per person per day (3-day supply)</small>
                                        </div>
                                    </label>
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Non-perishable food</strong>
                                            <small>3-day supply for each person</small>
                                        </div>
                                    </label>
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Manual can opener</strong>
                                            <small>For canned food</small>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div class="kit-section">
                                <h3><i class="fas fa-bolt"></i> Power & Communication</h3>
                                <div class="kit-checklist">
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Battery-powered radio</strong>
                                            <small>NOAA Weather Radio with tone alert</small>
                                        </div>
                                    </label>
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Flashlight</strong>
                                            <small>With extra batteries</small>
                                        </div>
                                    </label>
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Cell phone chargers</strong>
                                            <small>Solar or hand crank charger</small>
                                        </div>
                                    </label>
                                </div>
                            </div>
                            <div class="kit-section">
                                <h3><i class="fas fa-medkit"></i> Medical & Safety</h3>
                                <div class="kit-checklist">
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>First aid kit</strong>
                                            <small>Include prescription medications</small>
                                        </div>
                                    </label>
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Whistle</strong>
                                            <small>For signaling help</small>
                                        </div>
                                    </label>
                                    <label class="kit-item">
                                        <input type="checkbox" onchange="updateKitProgress()">
                                        <span class="checkmark"></span>
                                        <div class="item-details">
                                            <strong>Dust masks</strong>
                                            <small>And plastic sheeting for shelter</small>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="kit-progress">
                            <h4>Emergency Kit Completion</h4>
                            <div class="progress-container">
                                <div class="progress-bar-container">
                                    <div class="progress-bar" id="kitProgress"></div>
                                </div>
                                <span class="progress-text" id="kitProgressText">0% Complete</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <i class="fas fa-shield-alt"></i>
                        <h4>FloodGuard</h4>
                    </div>
                    <p>Keeping communities safe through timely information and emergency preparedness.</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <div class="footer-links">
                        <button onclick="scrollToSection('alerts')" class="footer-link">Emergency Alerts</button>
                        <button onclick="scrollToSection('safety')" class="footer-link">Safety Guidelines</button>
                        <button onclick="scrollToSection('report')" class="footer-link">Report Incident</button>
                        <button onclick="scrollToSection('resources')" class="footer-link">Resources</button>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Emergency Contacts</h4>
                    <div class="footer-contacts">
                        <p><strong>Emergency:</strong> <a href="tel:911">911</a></p>
                        <p><strong>Non-Emergency:</strong> <a href="tel:555-123-4567">(555) 123-4567</a></p>
                        <p><strong>Email:</strong> <a href="mailto:info@floodguard.gov">info@floodguard.gov</a></p>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 FloodGuard Emergency Management System. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script>
        // Global variables
        let floodChart = null;
        let currentLocation = null;
        let alertIdCounter = 1000;
        let currentSafetyTab = "before";
        let currentResourceTab = "contacts";
        let isDarkMode = false;
        let alerts = [];
        let currentFilter = "all";

        // Initialize the application
        document.addEventListener("DOMContentLoaded", () => {
            showLoadingScreen();
            setTimeout(() => {
                hideLoadingScreen();
                initializeApp();
            }, 2000);
        });

        function showLoadingScreen() {
            const loadingScreen = document.getElementById("loadingScreen");
            if (loadingScreen) {
                loadingScreen.style.display = "flex";
            }
        }

        function hideLoadingScreen() {
            const loadingScreen = document.getElementById("loadingScreen");
            if (loadingScreen) {
                loadingScreen.style.opacity = "0";
                setTimeout(() => {
                    loadingScreen.style.display = "none";
                }, 500);
            }
        }

        function initializeApp() {
            console.log("FloodGuard Disaster Management System Initialized");

            // Load saved preferences
            loadUserPreferences();

            // Initialize components
            loadDefaultAlerts();
            initializeChart();
            updateStatus();
            setupEventListeners();
            updateKitProgress();

            // Set up real-time updates
            setInterval(updateRealTimeData, 30000);

            // Set up scroll listener for back to top button
            window.addEventListener("scroll", handleScroll);

            // Check for geolocation support
            if ("geolocation" in navigator) {
                console.log("Geolocation is available");
            } else {
                console.log("Geolocation is not available");
            }
        }

        function setupEventListeners() {
            // Character counter for description
            const descriptionField = document.getElementById("description");
            if (descriptionField) {
                descriptionField.addEventListener("input", updateCharCounter);
            }

            // Kit checklist progress
            const kitCheckboxes = document.querySelectorAll('.kit-item input[type="checkbox"]');
            kitCheckboxes.forEach((checkbox) => {
                checkbox.addEventListener("change", updateKitProgress);
            });

            // Anonymous checkbox
            const anonymousCheckbox = document.getElementById("anonymous");
            if (anonymousCheckbox) {
                anonymousCheckbox.addEventListener("change", toggleAnonymousMode);
            }
        }

        function loadUserPreferences() {
            // Load dark mode preference
            const savedTheme = localStorage.getItem("floodguard-theme");
            if (savedTheme === "dark") {
                toggleDarkMode();
            }

            // Load kit progress
            const savedKit = localStorage.getItem("floodguard-kit");
            if (savedKit) {
                const kitItems = JSON.parse(savedKit);
                kitItems.forEach((checked, index) => {
                    const checkbox = document.querySelector(`.kit-item:nth-child(${index + 1}) input[type="checkbox"]`);
                    if (checkbox) {
                        checkbox.checked = checked;
                    }
                });
            }
        }

        function saveUserPreferences() {
            // Save theme
            localStorage.setItem("floodguard-theme", isDarkMode ? "dark" : "light");

            // Save kit progress
            const kitCheckboxes = document.querySelectorAll('.kit-item input[type="checkbox"]');
            const kitProgress = Array.from(kitCheckboxes).map((cb) => cb.checked);
            localStorage.setItem("floodguard-kit", JSON.stringify(kitProgress));
        }

        // Get current location
        function getCurrentLocation() {
            if ("geolocation" in navigator) {
                showNotification("Getting your location...", "info");

                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        currentLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                        };
                        showNotification("Location detected! Loading local flood alerts...", "success");
                        setTimeout(() => {
                            loadLocalAlerts();
                        }, 2000);
                    },
                    (error) => {
                        console.error("Geolocation error:", error);
                        showNotification("Unable to get your location. Using default area.", "warning");
                        loadDefaultAlerts();
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 300000,
                    }
                );
            } else {
                showNotification("Geolocation not supported. Using default area.", "warning");
                loadDefaultAlerts();
            }
        }

        // Load default alerts
        function loadDefaultAlerts() {
            alerts = [
                {
                    id: alertIdCounter++,
                    title: "Flood Warning - Downtown Area",
                    message: "Water levels rising rapidly near Main Street. Avoid the area and seek higher ground.",
                    severity: "high",
                    time: "15 minutes ago",
                    location: "Downtown District",
                    timestamp: new Date(Date.now() - 15 * 60 * 1000),
                },
                {
                    id: alertIdCounter++,
                    title: "Road Closure - Highway 101",
                    message: "Highway 101 closed due to flooding between exits 15-18. Use alternate routes.",
                    severity: "medium",
                    time: "1 hour ago",
                    location: "Highway 101",
                    timestamp: new Date(Date.now() - 60 * 60 * 1000),
                },
                {
                    id: alertIdCounter++,
                    title: "Weather Advisory",
                    message: "Heavy rainfall expected for the next 6 hours. Monitor local conditions.",
                    severity: "low",
                    time: "2 hours ago",
                    location: "County-wide",
                    timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),
                },
                {
                    id: alertIdCounter++,
                    title: "Evacuation Center Update",
                    message: "Central Community Center now has additional capacity available for evacuees.",
                    severity: "medium",
                    time: "3 hours ago",
                    location: "Central District",
                    timestamp: new Date(Date.now() - 3 * 60 * 60 * 1000),
                },
                {
                    id: alertIdCounter++,
                    title: "Infrastructure Alert",
                    message: "Water treatment facility operating at reduced capacity. Boil water advisory in effect.",
                    severity: "high",
                    time: "4 hours ago",
                    location: "City-wide",
                    timestamp: new Date(Date.now() - 4 * 60 * 60 * 1000),
                },
            ];

            displayAlerts(filterAlertsBySeverity(alerts, currentFilter));
        }

        // Load local alerts based on location
        function loadLocalAlerts() {
            const localAlerts = [
                {
                    id: alertIdCounter++,
                    title: "URGENT - Flash Flood Warning in Your Area",
                    message: "Immediate evacuation recommended for low-lying areas within 2 miles of your location.",
                    severity: "critical",
                    time: "Just now",
                    location: "Your Area",
                    timestamp: new Date(),
                },
                {
                    id: alertIdCounter++,
                    title: "Local Evacuation Center Open",
                    message: "Community Center at 123 Safe Street is now open for evacuees. Free shelter and meals available.",
                    severity: "medium",
                    time: "5 minutes ago",
                    location: "1.2 miles from you",
                    timestamp: new Date(Date.now() - 5 * 60 * 1000),
                },
                {
                    id: alertIdCounter++,
                    title: "Emergency Services Deployed",
                    message: "Rescue teams have been dispatched to your area. Stay in safe location and await assistance.",
                    severity: "high",
                    time: "10 minutes ago",
                    location: "0.8 miles from you",
                    timestamp: new Date(Date.now() - 10 * 60 * 1000),
                },
            ];

            // Add local alerts to the beginning of the array
            alerts = [...localAlerts, ...alerts];
            displayAlerts(filterAlertsBySeverity(alerts, currentFilter));
        }

        // Filter alerts by severity
        function filterAlertsBySeverity(alertsArray, severity) {
            if (severity === "all") {
                return alertsArray;
            }
            return alertsArray.filter((alert) => alert.severity === severity);
        }

        // Filter alerts function
        function filterAlerts(severity) {
            currentFilter = severity;

            // Update active filter button
            document.querySelectorAll(".filter-btn").forEach((btn) => {
                btn.classList.remove("active");
            });
            event.target.classList.add("active");

            // Display filtered alerts
            const filteredAlerts = filterAlertsBySeverity(alerts, severity);
            displayAlerts(filteredAlerts);
        }

        // Display alerts in the container
        function displayAlerts(alertsToShow) {
            const alertsContainer = document.getElementById("alertsContainer");

            if (alertsToShow.length === 0) {
                alertsContainer.innerHTML = `
                    <div class="no-alerts">
                        <i class="fas fa-info-circle"></i>
                        <p>No alerts found for the selected filter.</p>
                    </div>
                `;
                return;
            }

            alertsContainer.innerHTML = alertsToShow
                .slice(0, 10) // Show only first 10 alerts
                .map(
                    (alert, index) => `
                    <div class="alert-item ${alert.severity}" style="animation-delay: ${index * 0.1}s">
                        <div class="alert-header">
                            <span class="alert-title">${alert.title}</span>
                            <span class="alert-time">${alert.time}</span>
                        </div>
                        <p>${alert.message}</p>
                        <small><i class="fas fa-map-marker-alt"></i> ${alert.location}</small>
                    </div>
                `
                )
                .join("");
        }

        // Load more alerts
        function loadMoreAlerts() {
            const moreAlerts = [
                {
                    id: alertIdCounter++,
                    title: "Supply Distribution Update",
                    message: "Additional water and food supplies have arrived at Red Cross Distribution Center.",
                    severity: "low",
                    time: "5 hours ago",
                    location: "Relief Ave",
                    timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000),
                },
                {
                    id: alertIdCounter++,
                    title: "Transportation Advisory",
                    message: "Public transportation services suspended until further notice due to flooding.",
                    severity: "medium",
                    time: "6 hours ago",
                    location: "City-wide",
                    timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000),
                },
            ];

            alerts = [...alerts, ...moreAlerts];
            displayAlerts(filterAlertsBySeverity(alerts, currentFilter));

            showNotification("Additional alerts loaded", "info");
        }

        // Initialize flood data chart
        function initializeChart() {
            const ctx = document.getElementById("floodChart");
            if (!ctx) return;

            const chartData = generateChartData("week");

            floodChart = new Chart(ctx, {
                type: "line",
                data: {
                    labels: chartData.labels,
                    datasets: [
                        {
                            label: "Water Level (m)",
                            data: chartData.waterLevels,
                            borderColor: "#3498db",
                            backgroundColor: "rgba(52, 152, 219, 0.1)",
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: "#3498db",
                            pointBorderColor: "#fff",
                            pointBorderWidth: 2,
                            pointRadius: 5,
                        },
                        {
                            label: "Danger Level",
                            data: chartData.dangerLevel,
                            borderColor: "#e74c3c",
                            backgroundColor: "rgba(231, 76, 60, 0.1)",
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0,
                        },
                    ],
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: "index",
                    },
                    plugins: {
                        legend: {
                            position: "top",
                        },
                        tooltip: {
                            backgroundColor: "rgba(0, 0, 0, 0.8)",
                            titleColor: "white",
                            bodyColor: "white",
                            borderColor: "#3498db",
                            borderWidth: 1,
                        },
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: "Water Level (meters)",
                            },
                            grid: {
                                color: "rgba(0, 0, 0, 0.1)",
                            },
                        },
                        x: {
                            title: {
                                display: true,
                                text: "Date",
                            },
                            grid: {
                                color: "rgba(0, 0, 0, 0.1)",
                            },
                        },
                    },
                },
            });
        }

        // Generate chart data
        function generateChartData(period) {
            const days = period === "year" ? 365 : period === "month" ? 30 : 7;
            const labels = [];
            const waterLevels = [];
            const dangerLevel = [];

            for (let i = days - 1; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);

                if (period === "year") {
                    labels.push(date.toLocaleDateString("en-US", { month: "short" }));
                } else if (period === "month") {
                    labels.push(date.toLocaleDateString("en-US", { month: "short", day: "numeric" }));
                } else {
                    labels.push(date.toLocaleDateString("en-US", { weekday: "short" }));
                }

                // Generate realistic water level data
                const baseLevel = 2.0;
                const seasonalVariation = Math.sin((i / days) * 2 * Math.PI) * 0.5;
                const randomVariation = (Math.random() - 0.5) * 1.0;
                const trendVariation = Math.sin(i * 0.1) * 1.5;

                waterLevels.push(Math.max(0, baseLevel + seasonalVariation + randomVariation + trendVariation));
                dangerLevel.push(4.0);
            }

            return { labels, waterLevels, dangerLevel };
        }

        // Update chart data
        function updateChart(period) {
            if (!floodChart) return;

            const chartData = generateChartData(period);

            floodChart.data.labels = chartData.labels;
            floodChart.data.datasets[0].data = chartData.waterLevels;
            floodChart.data.datasets[1].data = chartData.dangerLevel;
            floodChart.update("active");

            // Update chart title
            const chartTitle = document.getElementById("chartTitle");
            if (chartTitle) {
                const periodText = period === "year" ? "1 Year" : period === "month" ? "30 Days" : "7 Days";
                chartTitle.textContent = `Water Level Monitoring (Last ${periodText})`;
            }

            // Update active button
            document.querySelectorAll(".chart-controls .btn").forEach((btn) => {
                btn.classList.remove("active");
            });
            event.target.classList.add("active");

            // Update statistics based on period
            updateStatistics(chartData.waterLevels, period);
        }

        // Update chart type
        function updateChartType() {
            const dataType = document.getElementById("dataType").value;

            if (!floodChart) return;

            // This would typically fetch different data based on type
            // For demo purposes, we'll just update the chart title
            const chartTitle = document.getElementById("chartTitle");
            if (chartTitle) {
                switch (dataType) {
                    case "water":
                        chartTitle.textContent = chartTitle.textContent.replace(/Rainfall|Combined/, "Water Level");
                        break;
                    case "rainfall":
                        chartTitle.textContent = chartTitle.textContent.replace(/Water Level|Combined/, "Rainfall");
                        break;
                    case "combined":
                        chartTitle.textContent = chartTitle.textContent.replace(/Water Level|Rainfall/, "Combined");
                        break;
                }
            }
        }

        // Update statistics
        function updateStatistics(waterLevels, period) {
            const peakLevel = Math.max(...waterLevels);
            const avgLevel = waterLevels.reduce((a, b) => a + b, 0) / waterLevels.length;

            document.getElementById("peakLevel").textContent = `${peakLevel.toFixed(1)}m`;

            // Simulate other statistics
            const rainfall = Math.floor(Math.random() * 200) + 50;
            const incidents = Math.floor(Math.random() * 10) + 1;
            const evacuated = Math.floor(Math.random() * 500) + 100;

            document.getElementById("totalRainfall").textContent = `${rainfall}mm`;
            document.getElementById("floodIncidents").textContent = incidents.toString();
            document.getElementById("peopleEvacuated").textContent = evacuated.toString();
        }

        // Update real-time status
        function updateStatus() {
            const statuses = [
                {
                    text: "Safe - No immediate threat",
                    class: "safe",
                    level: "2.3m (Normal)",
                    rainfall: "15mm (Light)",
                    wind: "12 km/h (Light)",
                    progress: 25,
                },
                {
                    text: "Watch - Monitor conditions",
                    class: "watch",
                    level: "3.1m (Elevated)",
                    rainfall: "45mm (Moderate)",
                    wind: "18 km/h (Moderate)",
                    progress: 60,
                },
                {
                    text: "Warning - Prepare for flooding",
                    class: "warning",
                    level: "3.8m (High)",
                    rainfall: "78mm (Heavy)",
                    wind: "25 km/h (Strong)",
                    progress: 85,
                },
            ];

            const currentStatus = statuses[Math.floor(Math.random() * statuses.length)];

            document.getElementById("currentStatus").textContent = currentStatus.text;
            document.getElementById("waterLevel").textContent = currentStatus.level;
            document.getElementById("rainfall").textContent = currentStatus.rainfall;
            document.getElementById("windSpeed").textContent = currentStatus.wind;
            document.getElementById("lastUpdated").textContent = `Last updated: ${new Date().toLocaleTimeString()}`;

            // Update progress bars
            const statusProgress = document.getElementById("statusProgress");
            const waterLevelBar = document.getElementById("waterLevelBar");

            if (statusProgress) {
                statusProgress.style.width = `${currentStatus.progress}%`;
            }

            if (waterLevelBar) {
                const waterPercentage = (parseFloat(currentStatus.level) / 5) * 100;
                waterLevelBar.style.width = `${Math.min(waterPercentage, 100)}%`;
            }

            // Update status card class
            const statusCard = document.getElementById("statusCard");
            if (statusCard) {
                statusCard.className = `status-card ${currentStatus.class}`;
            }
        }

        // Update real-time data
        function updateRealTimeData() {
            updateStatus();

            // Update banner text occasionally
            if (Math.random() < 0.3) {
                updateAlertBanner();
            }

            // Simulate new alerts occasionally
            if (Math.random() < 0.2) {
                addNewAlert();
            }
        }

        // Update alert banner
        function updateAlertBanner() {
            const bannerTexts = [
                "FLOOD WARNING: Heavy rainfall expected in your area. Stay alert!",
                "WEATHER UPDATE: Storm system approaching. Monitor conditions closely.",
                "EVACUATION NOTICE: Voluntary evacuation recommended for low-lying areas.",
                "SAFETY REMINDER: Avoid driving through flooded roads. Turn around, don't drown!",
            ];

            const bannerText = document.getElementById("bannerText");
            if (bannerText) {
                bannerText.textContent = bannerTexts[Math.floor(Math.random() * bannerTexts.length)];
            }
        }

        // Add new alert
        function addNewAlert() {
            const newAlerts = [
                {
                    title: "New Flood Report - Riverside Park",
                    message: "Citizen reported rising water levels near the playground area. Authorities investigating.",
                    severity: "medium",
                    time: "Just now",
                    location: "Riverside Park",
                },
                {
                    title: "Emergency Services Deployed",
                    message: "Rescue teams dispatched to assist stranded motorists on Oak Street.",
                    severity: "high",
                    time: "Just now",
                    location: "Oak Street",
                },
                {
                    title: "Shelter Capacity Update",
                    message: "High School Gymnasium has reached 80% capacity. Alternative shelters available.",
                    severity: "medium",
                    time: "Just now",
                    location: "High School District",
                },
                {
                    title: "Power Outage Report",
                    message: "Localized power outages reported in downtown area due to flooding.",
                    severity: "high",
                    time: "Just now",
                    location: "Downtown District",
                },
            ];

            const alert = newAlerts[Math.floor(Math.random() * newAlerts.length)];
            const newAlert = {
                id: alertIdCounter++,
                ...alert,
                timestamp: new Date(),
            };

            // Add to beginning of alerts array
            alerts.unshift(newAlert);

            // Redisplay alerts with current filter
            displayAlerts(filterAlertsBySeverity(alerts, currentFilter));

            // Show notification
            showNotification("New emergency alert received!", "warning");
        }

        // Safety tab functions
        function showSafetyTab(tabName) {
            currentSafetyTab = tabName;

            // Update tab buttons
            document.querySelectorAll(".tab-btn").forEach((btn) => {
                btn.classList.remove("active");
            });
            event.target.classList.add("active");

            // Update tab content
            document.querySelectorAll(".safety-tab").forEach((tab) => {
                tab.classList.remove("active");
            });
            document.getElementById(tabName).classList.add("active");
        }

        // Resource tab functions
        function showResourceTab(tabName) {
            currentResourceTab = tabName;

            // Update tab buttons
            document.querySelectorAll(".resource-tab").forEach((btn) => {
                btn.classList.remove("active");
            });
            event.target.classList.add("active");

            // Update tab content
            document.querySelectorAll(".resource-panel").forEach((panel) => {
                panel.classList.remove("active");
            });
            document.getElementById(tabName).classList.add("active");
        }

        // Handle report form submission
        function handleReportSubmit(event) {
            event.preventDefault();

            const formData = {
                incidentType: document.getElementById("incidentType").value,
                location: document.getElementById("location").value,
                severity: document.querySelector('input[name="severity"]:checked')?.value,
                description: document.getElementById("description").value,
                contact: document.getElementById("contact").value,
                anonymous: document.getElementById("anonymous").checked,
            };

            // Validate required fields
            if (!formData.incidentType || !formData.location || !formData.severity || !formData.description) {
                showNotification("Please fill in all required fields.", "error");
                return;
            }

            // Show loading state
            const submitBtn = event.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
            submitBtn.disabled = true;

            // Simulate form submission
            setTimeout(() => {
                showNotification("Report submitted successfully! Emergency services have been notified.", "success");

                // Reset form
                document.getElementById("reportForm").reset();

                // Reset submit button
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;

                // Add to alerts after processing
                setTimeout(() => {
                    addReportToAlerts(formData);
                }, 3000);
            }, 2000);
        }

        // Add submitted report to alerts
        function addReportToAlerts(reportData) {
            const newAlert = {
                id: alertIdCounter++,
                title: `Citizen Report - ${reportData.incidentType}`,
                message: reportData.description,
                severity: reportData.severity,
                time: "Just now",
                location: reportData.location,
                timestamp: new Date(),
            };

            alerts.unshift(newAlert);
            displayAlerts(filterAlertsBySeverity(alerts, currentFilter));

            showNotification("Your report has been added to the emergency alerts system.", "info");
        }

        // Use current location for reporting
        function useCurrentLocation() {
            if (currentLocation) {
                document.getElementById("location").value =
                    `Lat: ${currentLocation.lat.toFixed(4)}, Lng: ${currentLocation.lng.toFixed(4)}`;
                showLocationOnMap();
            } else {
                getCurrentLocation();
                setTimeout(() => {
                    if (currentLocation) {
                        document.getElementById("location").value =
                            `Lat: ${currentLocation.lat.toFixed(4)}, Lng: ${currentLocation.lng.toFixed(4)}`;
                        showLocationOnMap();
                    }
                }, 2000);
            }
        }

        function showLocationOnMap() {
            const locationMap = document.getElementById("locationMap");
            if (locationMap && currentLocation) {
                locationMap.innerHTML = `
                    <div class="map-placeholder">
                        <i class="fas fa-map-marker-alt" style="color: #e74c3c;"></i>
                        <p>Location: ${currentLocation.lat.toFixed(4)}, ${currentLocation.lng.toFixed(4)}</p>
                        <small>Coordinates have been captured</small>
                    </div>
                `;
            }
        }

        // Character counter
        function updateCharCounter() {
            const description = document.getElementById("description");
            const charCount = document.getElementById("charCount");

            if (description && charCount) {
                const currentLength = description.value.length;
                charCount.textContent = currentLength;

                if (currentLength > 450) {
                    charCount.style.color = "#e74c3c";
                } else if (currentLength > 400) {
                    charCount.style.color = "#f39c12";
                } else {
                    charCount.style.color = "#7f8c8d";
                }
            }
        }

        // Anonymous mode toggle
        function toggleAnonymousMode() {
            const anonymous = document.getElementById("anonymous").checked;
            const contactField = document.getElementById("contact");

            if (contactField) {
                contactField.disabled = anonymous;
                if (anonymous) {
                    contactField.value = "";
                    contactField.style.opacity = "0.5";
                } else {
                    contactField.style.opacity = "1";
                }
            }
        }

        // Kit progress tracking
        function updateKitProgress() {
            const kitCheckboxes = document.querySelectorAll('.kit-item input[type="checkbox"]');
            const checkedBoxes = document.querySelectorAll('.kit-item input[type="checkbox"]:checked');

            const progress = (checkedBoxes.length / kitCheckboxes.length) * 100;

            const progressBar = document.getElementById("kitProgress");
            const progressText = document.getElementById("kitProgressText");

            if (progressBar) {
                progressBar.style.width = `${progress}%`;
            }

            if (progressText) {
                progressText.textContent = `${Math.round(progress)}% Complete`;
            }

            // Save progress
            saveUserPreferences();

            // Show encouragement
            if (progress === 100) {
                showNotification("Congratulations! Your emergency kit is complete!", "success");
            } else if (progress >= 75) {
                showNotification("Great progress on your emergency kit!", "info");
            }
        }

        // Emergency call function
        function callEmergency() {
            if (confirm("This will attempt to call emergency services (911). Continue?")) {
                // In a real app, this would initiate a call
                window.location.href = "tel:911";
            }
        }

        // Get directions function
        function getDirections(address) {
            const encodedAddress = encodeURIComponent(address);
            const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodedAddress}`;
            window.open(mapsUrl, "_blank");
        }

        // Dark mode toggle
        function toggleDarkMode() {
            isDarkMode = !isDarkMode;
            const body = document.body;
            const themeIcon = document.getElementById("themeIcon");
            const themeText = document.getElementById("themeText");

            if (isDarkMode) {
                body.setAttribute("data-theme", "dark");
                if (themeIcon) themeIcon.className = "fas fa-sun";
                if (themeText) themeText.textContent = "Light Mode";
            } else {
                body.removeAttribute("data-theme");
                if (themeIcon) themeIcon.className = "fas fa-moon";
                if (themeText) themeText.textContent = "Dark Mode";
            }

            saveUserPreferences();
        }

        // Close alert banner
        function closeAlert() {
            const alertBanner = document.getElementById("alertBanner");
            if (alertBanner) {
                alertBanner.style.display = "none";
            }
        }

        // Scroll to section
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({
                    behavior: "smooth",
                    block: "start",
                });
            }
        }

        // Scroll to top
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: "smooth",
            });
        }

        // Handle scroll for back to top button
        function handleScroll() {
            const backToTop = document.getElementById("backToTop");
            if (backToTop) {
                if (window.pageYOffset > 300) {
                    backToTop.classList.add("visible");
                } else {
                    backToTop.classList.remove("visible");
                }
            }
        }

        // Show notification
        function showNotification(message, type = "info") {
            const notificationsContainer = document.getElementById("notifications");
            const notification = document.createElement("div");
            notification.className = `notification ${type}`;

            const icon =
                type === "success"
                    ? "check-circle"
                    : type === "warning"
                        ? "exclamation-triangle"
                        : type === "error"
                            ? "times-circle"
                            : "info-circle";

            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${icon}"></i>
                    <span>${message}</span>
                </div>
                <button class="close-btn" onclick="this.parentElement.remove()">&times;</button>
            `;

            notificationsContainer.appendChild(notification);

            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // Keyboard shortcuts
        document.addEventListener("keydown", (e) => {
            // Escape key to close modals/notifications
            if (e.key === "Escape") {
                const notifications = document.querySelectorAll(".notification");
                notifications.forEach((notification) => notification.remove());
            }
        });
    </script>
</body>
</html>

